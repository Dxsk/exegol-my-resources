# Config file dedicated to the user's personal aliases shared between all exegol containers

ws_path='/workspace'
ex_profile_path='/opt/tools/Exegol-history/profile.sh'
my_resources_path='/opt/my-resources'

# custom /workspace/ directory
ws.gen () {
    if [ -z "$ATTACKER_PASSPHRASE" ]; then
        echo "ATTACKER_PASSPHRASE is not set"
        read -s -p "Enter the passphrase: " ATTACKER_PASSPHRASE
        echo "export ATTACKER_PASSPHRASE=$ATTACKER_PASSPHRASE" >> $ex_profile_path
        exec zsh
    fi

    mkdir -p $ws_path/{implants,scripts,tools,miscs,sources,differences,reports}
    touch $ws_path/{doc.md}
    ssh-keygen -t rsa -b 4096 -f $ws_path/implants/implant.key -N $ATTACKER_PASSPHRASE -q
}

# smb_downloads.py 
smbdownloads () { python $my_resources_path/setup/python3/smb_downloads.py $@ }
alias smb_downloads='smbdownloads'

# add hosts
add.host () { local result="$1"; shift; for param in "$@"; do result="${result}	$param"; done; echo "$result" >> /etc/hosts && cat /etc/hosts }
show.host () { bat /etc/hosts }
edit.host () { nvim /etc/hosts }

# editor
alias vim='nvim'

# shortcut to edit and load the profile.sh
add.export () { 
  local result="export $1='";
  if [ $# -lt 2 ]; then
    echo "Usage: add.export VARIABLE_NAME VALUE"
    return 1
  fi
  shift
  local value="$2"
  result="${result}${value}'"
  echo "$result" >> $ex_profile_path
}
show.export () { bat $ex_profile_path }
edit.export () { nvim $ex_profile_path && exec zsh } 

# wget 
wget.focus () { wget --no-parent --convert-links --no-host-directories --execute robots=off --user-agent=Mozilla/5.0 http://$NDD/$1 }
wget.full () { wget --recursive --no-parent --convert-links --page-requisites --no-host-directories --execute robots=off --user-agent=Mozilla/5.0 http://$NDD }
wget.light () { wget --recursive --no-parent --convert-links --page-requisites --no-host-directories --execute robots=off --user-agent=Mozilla/5.0 --reject="*.js,*.jpg,*.png,*.ico" http://$NDD }
wget.random.light () { wget --recursive --no-parent --convert-links --page-requisites --random-wait --wait=3 --no-host-directories --execute robots=off --user-agent=Mozilla/5.0 --reject="*.js,*.jpg,*.png,*.ico" http://$NDD }

# base64
b.decode () { echo $1 | base64 -d }
b.encode () { echo $1 | base64 } 

# shortcut Documentations
doc.gtfobin () { echo 'https://gtfobins.github.io/' }
doc.hacktricks () { echo 'https://book.hacktricks.wiki/en/index.html' }  
doc.thehackerrecipes () { echo 'https://www.thehacker.recipes/' }
doc.exegol () { echo 'https://exegol.readthedocs.io/' } 
doc.exegol.tricks () { echo 'https://exegol.readthedocs.io/en/latest/getting-started/tips-and-tricks.html'}
doc.lolbas () { echo 'https://lolbas-project.github.io/' }

# github
github.poda () { echo 'https://github.com/p0dalirius' }

# tools
tools.cyberchef () { echo 'https://gchq.github.io/CyberChef/' }

